var fact =  $("div.fact-block[data-fact-id=<%=@fact.id%>]");
var evidenceList = fact.find('.evidence-list ul.evidence-listing');

evidenceList.empty();


<% unless @evidence.count > 0 %>
  fact.find('.no-evidence-message').fadeIn();
<% else %>
  fact.find('.no-evidence-message').hide();
  var $el, $bubble;
  <% @evidence.each do |evidence| %>
    $el = $("<%= escape_javascript(render('/facts/evidence_bubble', fact_relation: evidence )) %>");
    $bubble = $(Mustache.to_html($('#fact_bubble_tmpl').html(), <%= Facts::FactBubble.for_fact_and_view(evidence.from_fact, self).to_json.html_safe %>, {fact_wheel: $('#fact_wheel_tmpl').html()}));
    
    $el.append($bubble);
    
    $el.data("wheel", new Wheel($el));
    $el.data("wheel").init($el.find(".wheel").get(0));
    
    evidenceList.append($el);
  <% end %>
<% end %>