<% content_for :javascript do %>
  <script>
    var results = new SearchFacts(<%= @results.map{|f| Facts::Fact.for(fact: f, view: self)}.to_json.html_safe %>, {
      search: "<%= params[:s] %>"
    });

    var factsView = new FactsView({
      collection: results
    }).render();

    $('#results-listing').append(factsView.el);
  </script>
<% end %>


<% content_for :left_column do %>
  <%= user_signed_in? ? render("users/user_li", user: current_user ) : "&nbsp;".html_safe %>
<% end %>

<h1>Searched for: <b><%= params[:s] %></b></h1>

<% unless @results.count > 0 %>
  <div class="append-bottom">
      <p>Sorry, your search didn't return any results.</p>
  </div>
<% else %>
  <ul id="results-listing">
  </ul>
<% end %>
