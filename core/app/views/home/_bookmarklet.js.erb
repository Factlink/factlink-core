//IMPORTANT: please use only double quotes to delimit strings
(function(){
  var lib_url = "<%= FactlinkUI::Application.config.jslib_url %>";

  <% if ['development'].include?(Rails.env) %>
    var loader_filename = "/factlink_loader_bookmarklet.js?" + (new Date()).getTime();

    window.FactlinkConfig = {
      api: "<%= FactlinkUI::Application.config.api_url %>",
      lib: lib_url,
      srcPath: "/factlink.core.js"
    };
  <% elsif ['staging'].include?(Rails.env) %>
    var loader_filename = "/factlink_loader_bookmarklet.min.js";

    window.FactlinkConfig = {
      api: "<%= FactlinkUI::Application.config.api_url %>",
      lib: lib_url,
      srcPath: "/factlink.core.min.js"
    };
  <% else %>
    var loader_filename = "/factlink_loader_bookmarklet.min.js";
  <% end %>


  var script = document.createElement("script");
  script.src = lib_url + loader_filename;

  document.getElementsByTagName("head")[0].appendChild(script);
})();
