//IMPORTANT: please use only double quotes to delimit strings
(function(){
  var lib_url = "<%= jslib_url %>";

  <% if ['development'].include?(Rails.env) %>
    var loader_filename = "/factlink_loader_bookmarklet.js?" + (new Date()).getTime();

    window.FactlinkConfig = {
      api: "<%= FactlinkUI::Application.config.api_url %>",
      lib: lib_url,
      srcPath: "/factlink.core.js"
    };
  <% elsif ['testserver', 'staging'].include?(Rails.env) %>
    var loader_filename = "/factlink_loader_bookmarklet.min.js";

    window.FactlinkConfig = {
      api: "<%= FactlinkUI::Application.config.api_url %>",
      lib: lib_url,
      srcPath: "/factlink.core.min.js"
    };
  <% else %>
    var loader_filename = "/factlink_loader_bookmarklet.min.js";
  <% end %>


  var script = document.createElement("script");
  script.src = lib_url + loader_filename;

  var head = document.getElementsByTagName("head")[0];
  head.insertBefore(script, head.firstChild);
})();
