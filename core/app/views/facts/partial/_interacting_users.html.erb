<div class="fl-users fl-popup">

<%
	# Wohoo, this is not nice :D Logic in template, oh yeah.
	# But works for now.
	believers 		= fact_relation.opiniated(:beliefs)
	doubters 			= fact_relation.opiniated(:doubts)
	disbelievers 	= fact_relation.opiniated(:disbeliefs)

	total_count = believers.size + doubters.size + disbelievers.size
%>

	<div class="fl-clear"></div>


	<!-- Make a filter bar of this, so it's styled nice: -->
	<div id="filters" class="center" style="display:block;">
		<a class="all active" onclick="apply_filter('*');">all (<%= believers.size + doubters.size + disbelievers.size %>)</a>
		<a class="believers" onclick="apply_filter('.believers');">believers (<%= believers.size %>)</a>
		<a class="doubters" onclick="apply_filter('.doubters');">doubters <span class="counter">(<%= doubters.size %>)</span></a>
		<a class="disbelievers" onclick="apply_filter('.disbelievers');">disbelievers (<%= disbelievers.size %>)</a>
	</div>

	<div class="fl-scroll-pane">

		<ol id="fl-users">
			
			<% unless total_count > 0 %>

				<div class="center" style="padding-top: 48px; color: #fff; font-weight: 400; font-size: 1.1em; text-shadow: 0px 1px 0px #444;">
					<span>There are no users with an opinion on this fact.</span>
				</div>

			<% else %>
			
				<% believers.each do |believer| %>
					<li class="believers"><span class="believer tag">believes</span> <%= link_to(believer.username, user_profile_path(believer.username), :target => "_blank") %> <span style="font-size: 0.8em; float: right;">(<%= believer.authority %>)</span></li>
				<% end %>

				<% doubters.each do |doubter| %>
					<li class="doubters"><span class="doubter tag">doubts</span> <%= link_to(doubter.username, user_profile_path(doubter.username), :target => "_blank") %> <span style="font-size: 0.8em; float: right;">(<%= doubter.authority %>)</span></li>
				<% end %>

				<% disbelievers.each do |disbeliever| %>
					<li class="disbelievers"><span class="disbeliever tag">disbelieves</span> <%= link_to(disbeliever.username, user_profile_path(disbeliever.username), :target => "_blank") %> <span style="font-size: 0.8em; float: right;">(<%= disbeliever.authority %>)</span></li>
				<% end %>

			<% end %>
		</ol>
	</div>

</div>