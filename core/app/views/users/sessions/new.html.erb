<div class="new-session">
  <h3>Sign in to Factlink</h3>

  <%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
    <% if @layout == "client" %>
      <%= render 'home/notifications', notice: notice, alert: alert %>
    <% end %>

    <% if @layout %>
      <%= hidden_field_tag :layout, @layout %>
    <% end %>

    <%# Check whether this is secure: %>
    <%= hidden_field_tag :return_to, params[:return_to] %>

    <div class="with-credentials">
      <div class="form-box">
        <%= f.text_field :login, placeholder: "Username or email" %>
        <%= f.password_field :password, placeholder: "Password" %>
        <% if devise_mapping.rememberable? -%>
          <%= f.check_box :remember_me %>
          <%= f.label :remember_me %>
        <% end -%>

        <%= f.submit "Sign in", 'data-disable-with' => "Signing in...", :class => "btn pull-right" %>
      </div>
    </div>

    <div class="with-social">
      <a href="/auth/twitter?return_to=<%= params[:return_to] %>" class="btn twitter" data-disable-with="<i></i>Signing in...">
        <i></i>Sign in with Twitter
      </a>
      <a href="/auth/facebook?return_to=<%= params[:return_to] %>" class="btn facebook" data-disable-with="<i></i>Signing in...">
        <i></i>Sign in with Facebook
      </a>
    </div>

    <div class="separator">
      <span>or</span>
    </div>

    <div class="clearfix"></div>

    <%- if devise_mapping.recoverable? && controller_name != 'passwords' %>
      <%= link_to "Forgot your password?",
            new_password_path(resource_name),
            ( { target: "new" } if @layout == "client" ) %>
    <% end -%>
  <% end %>
</div>
