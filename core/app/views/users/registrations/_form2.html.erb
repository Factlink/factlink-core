<%= form_for(User.new, :as => :user, :url => registration_path(:user), remote: true, html: { id: form_id, novalidate: "novalidate" }) do |f| %>

  <%= f.text_field :username, placeholder: "Choose a username",
    class:"text", id: "#{form_id}_user_username" %>
  <%= f.email_field :email, placeholder: "Email address",
    class:"text", id: "#{form_id}_user_email" %>
  <%= f.hidden_field :registration_code,
    id: "#{form_id}_user_registration_code", value: @code %>


  <%= f.submit "Reserve my username", class: "btn btn-primary", 'data-disable-with' => "Reserving..." %>

<div class='success'>
  <div>
    Great, you&#39;re almost finished! Please click the confirmation link in the email we&#39;ve sent you.
  </div>
</div>

<% end %>
<% if @code and @code != '' %>
  <span class="reserved">You will be placed on the priority waiting list, offered to you by <%= @code %>.</span>
<% end %>
