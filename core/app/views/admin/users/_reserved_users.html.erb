<form class="filter sunken-embossed-well form-search">
  <input type="text" placeholder="Find a user" class="input-large search-query">
</form>

<table class="table table-bordered filterable">
  <thead>
  <tr>
    <th><%= sortable "username", "Username" %></th>
    <th><%= sortable "email", "Email" %></th>
    <th>status</th>
    <th><%= sortable "registration_code", "Registration code" %></th>
    <th><%= sortable "created_at", "Reserved at" %></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.username %></td>
        <td><%= user.email %></td>
        <td>
          <% if user.confirmed_at %>
          <span class="label label-info">confirmed</span>
          <% end %>

          <% if user.approved? %>
          <span class="label label-success">approved</span>
          <% end %>
        </td>
        <td>
          <%= user.registration_code %>
        </td>
        <td>
          <%= user.created_at %>
        </td>
        <td>
          <%= link_to "<i class=\"icon-edit\"></i>".html_safe, edit_admin_user_path(user.id) %>
          <% unless user.approved? %>
            <%= link_to "<i class=\"icon-check\"></i>".html_safe,
                        approve_admin_user_path(user.id) ,
                        method: "PUT",
                        remote: true,
                        data: { confirm: "Are you sure you want to approve user #{user.username}?" },
                        class: "approve-user" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
