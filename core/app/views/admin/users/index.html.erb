<header class="title">
  <h1><%= "#{@users.count} users" %></h1>
</header>

<form class="filter sunken-embossed-well form-search">
  <input type="text" placeholder="Find a user" class="input-large search-query">
</form>

<table class="table table-bordered filterable">
  <thead>
  <tr>
    <th><%= sortable "username", "Username" %></th>
    <th><%= sortable "email", "Email" %></th>
    <th><%= sortable "sign_in_count", "#sign ins" %></th>
    <th>features</th>
    <th>properties</th>
    <th><%= sortable "Name", "Name" %></th>
    <th><%= sortable "current_sign_in_at", "Last sign in" %></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= link_to user.username, user_profile_path(user) %></td>
        <td><%= user.email %></td>
        <td>
          <span class="label label-<%= sign_in_count_class_for user %>"><%= user.sign_in_count || 0 %></span>
        </td>

        <td>
          <span class="label label-<%= features_count_class_for user %>"><%= user.features_count %></span>
        </td>

        <td>
          <% if (!user.confirmed?) %>
            <span class="label label-warning">unconfirmed</span>
          <% elsif (!user.set_up?) %>
            <span class="label label-warning">not set up</span>
          <% elsif (!user.agrees_tos?) %>
            <span class="label label-warning">not agreed tos</span>
          <% end %>

          <% if (user.suspended?) %>
            <span class="label label-warning">suspended</span>
          <% end %>

          <% if (user.deleted?) %>
            <span class="label label-warning">deleted</span>
          <% end %>

          <% if (user.hidden?) %>
            <span class="label label-danger">hidden</span>
          <% end %>
        </td>

        <td>
          <%= user.first_name %> <%= user.last_name %>
        </td>

        <td><%= user.current_sign_in_at %></td>
        <td>
          <%= link_to "<i class=\"icon-edit\"></i>".html_safe, edit_admin_user_path(user.id) %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
