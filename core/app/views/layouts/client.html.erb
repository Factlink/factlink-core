<!DOCTYPE html>
<html class="<%= browser_class_name  %>">
<head>
  <title>Factlink modal window</title>

  <script type="text/javascript">
    if (screen.width > 590) {
      $('head').append('<meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1">');
    }
  </script>

  <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,300,700' rel='stylesheet' type='text/css'>
  <%= stylesheet_link_tag "base" %>
  <%= stylesheet_link_tag "frontend" %>
  <%# TODO: move this style to the css %>
  <style type="text/css">
    html, body{
      width: 100%;
      height: 100%;
      background: transparent;
    }
  </style>

  <%= csrf_meta_tag %>
  <%= inject_special_test_code %>
</head>
<body class="client">
  <div class="notification-center-alerts js-notification-center-alerts"></div>

  <div class="js-discussion-modal-region"><%= yield %></div>

  <div id='modal_region'></div>
  <div id="js-facebook-renewal-region"></div>
  <%= javascript_include_base %>
  <%= javascript_include_extended %>
  <%= render 'snippets/raven_js' %>

  <script type="text/javascript">
    <%= render 'backbone/currentUser' %>

    Factlink.allowFeatures(<%= current_ability.feature_toggles.to_json.html_safe %>);
    Factlink.setSignedIn(<%= current_ability.signed_in?.to_json.html_safe %>);

    FactlinkApp.start({factlinkAppMode: FactlinkAppMode.coreInClient});

    Backbone.history.start({pushState: Modernizr.history});
  </script>

  <%= yield :javascript %>

</body>
</html>
